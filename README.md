# VolumeSystem

> Разгребая легаси-проекты до 2020 года, я каждый раз изобретал велосипед, чтобы дать игроку возможность регулировать громкость.  
> Решил — хватит. Сделал систему, которую можно настроить за 2 минуты и забыть уже про велосипеды.

---

## 🔧 Как настроить

1. **В Audio Mixer создайте группу** (например, `Music` или `SFX`).  ![Screen1](Assets/SimpleAudioSystem/Screens/1AddGroup.jpg)
2. **Экспонируйте параметр громкости** и дайте ему имя (например, `Music`).  
   → *Это имя — ваш **ключ**.*  
   ![Screen2](Assets/SimpleAudioSystem/Screens/2AddExpose.jpg)
   ![Screen3](Assets/SimpleAudioSystem/Screens/3RenameExposed.jpg)

3. **На всех AudioSource укажите нужную группу** в поле **Output**.  
   ![Screen4](Assets/SimpleAudioSystem/Screens/4OutputAudioSource.jpg)

4. **На ползунок (Slider) повесьте скрипт `AudioSettingsUI`** и в поле `_key` укажите **то же имя**, что и у exposed parameter.  
   ![Screen5](Assets/SimpleAudioSystem/Screens/5AudioSettingsSlider.jpg)

5. **Готово.**  
   Громкость сохраняется между сценами и после перезапуска игры — через `PlayerPrefs`.

Также стоит отметить, что громкость звука с конкретным ключом не подгрузится, если нет активного слайдера на сцене. Чтобы решить эту проблему, был добавлен скрипт `AudioLoader`. Выбирая между получением ключей через рефлексию и через самостоятельное заполнение, выбрал второе. Так что не забудьте в инспекторе в список вписать все нужные вам ключи.

---

## 💡 Важно

- **Ключ (`Key`) должен быть одинаковым** в:
  - Имени exposed parameter в Audio Mixer
  - Поле `Key` в компоненте `AudioSettingsUI`
  - Элемент списка `Keys` в компоненте `AudioLoader`
- Не пытайтесь использовать разные ключи для одного и того же канала — это сломает сохранение/загрузку.
- Все звуки в одной группе регулируются **одновременно**. Хотите отдельную громкость — делайте отдельную группу.

---

## 📦 Что внутри

- `AudioSettingsUI.cs` — скрипт для слайдера.
- `AudioLoader.cs` — скрипт для загрузки сохраненных настроек.
- Демо-сцена — всё уже настроено.
- Делалось в Unity 2020.3.25f1. В соседних версиях должно работать аналогично.

---

## 📥 Как использовать

1. Скачайте `.unitypackage` 👉 [Скачать последнюю версию](https://github.com/Zubasty/VolumeSystem/releases) или скопируйте папку в свой проект.
2. Следуйте инструкции выше.

---

## 📄 Лицензия

MIT — делайте что хотите.

---

> ✨ «Это не идеально. Но это работает.»
